import{S as Rt,i as Bt,s as Ft,k as y,a as j,q as k,e as Ot,I as Vt,l as g,h as v,c as U,m as O,r as C,n as H,G as h,b as R,J as et,K as lt,L as ut,B as At,M as jt,N as Ut,u as kt,O as Zt}from"../../chunks/index-8786d358.js";import{j as Y}from"../../chunks/singletons-9eadbcdb.js";Y.disable_scroll_handling;const Gt=Y.goto;Y.invalidate;Y.invalidateAll;Y.preload_data;Y.preload_code;Y.before_navigate;Y.after_navigate;function qt(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var Ct={exports:{}};(function(p,d){(function(m){var b=2e3,n={s:1,n:0,d:1};function c(t,e){if(isNaN(t=parseInt(t,10)))throw s.InvalidParameter;return t*e}function a(t,e){if(e===0)throw s.DivisionByZero;var i=Object.create(s.prototype);i.s=t<0?-1:1,t=t<0?-t:t;var r=P(t,e);return i.n=t/r,i.d=e/r,i}function I(t){for(var e={},i=t,r=2,o=4;o<=i;){for(;i%r===0;)i/=r,e[r]=(e[r]||0)+1;o+=1+2*r++}return i!==t?i>1&&(e[i]=(e[i]||0)+1):e[t]=(e[t]||0)+1,e}var E=function(t,e){var i=0,r=1,o=1,w=0,_=0,Z=0,D=1,L=1,l=0,u=1,V=1,T=1,F=1e7,J;if(t!=null)if(e!==void 0){if(i=t,r=e,o=i*r,i%1!==0||r%1!==0)throw s.NonIntegerParameter}else switch(typeof t){case"object":{if("d"in t&&"n"in t)i=t.n,r=t.d,"s"in t&&(i*=t.s);else if(0 in t)i=t[0],1 in t&&(r=t[1]);else throw s.InvalidParameter;o=i*r;break}case"number":{if(t<0&&(o=t,t=-t),t%1===0)i=t;else if(t>0){for(t>=1&&(L=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=L);u<=F&&T<=F;)if(J=(l+V)/(u+T),t===J){u+T<=F?(i=l+V,r=u+T):T>u?(i=V,r=T):(i=l,r=u);break}else t>J?(l+=V,u+=T):(V+=l,T+=u),u>F?(i=V,r=T):(i=l,r=u);i*=L}else(isNaN(t)||isNaN(e))&&(r=i=NaN);break}case"string":{if(u=t.match(/\d+|./g),u===null)throw s.InvalidParameter;if(u[l]==="-"?(o=-1,l++):u[l]==="+"&&l++,u.length===l+1?_=c(u[l++],o):u[l+1]==="."||u[l]==="."?(u[l]!=="."&&(w=c(u[l++],o)),l++,(l+1===u.length||u[l+1]==="("&&u[l+3]===")"||u[l+1]==="'"&&u[l+3]==="'")&&(_=c(u[l],o),D=Math.pow(10,u[l].length),l++),(u[l]==="("&&u[l+2]===")"||u[l]==="'"&&u[l+2]==="'")&&(Z=c(u[l+1],o),L=Math.pow(10,u[l+1].length)-1,l+=3)):u[l+1]==="/"||u[l+1]===":"?(_=c(u[l],o),D=c(u[l+2],1),l+=3):u[l+3]==="/"&&u[l+1]===" "&&(w=c(u[l],o),_=c(u[l+2],o),D=c(u[l+4],1),l+=5),u.length<=l){r=D*L,o=i=Z+r*w+L*_;break}}default:throw s.InvalidParameter}if(r===0)throw s.DivisionByZero;n.s=o<0?-1:1,n.n=Math.abs(i),n.d=Math.abs(r)};function B(t,e,i){for(var r=1;e>0;t=t*t%i,e>>=1)e&1&&(r=r*t%i);return r}function M(t,e){for(;e%2===0;e/=2);for(;e%5===0;e/=5);if(e===1)return 0;for(var i=10%e,r=1;i!==1;r++)if(i=i*10%e,r>b)return 0;return r}function N(t,e,i){for(var r=1,o=B(10,i,e),w=0;w<300;w++){if(r===o)return w;r=r*10%e,o=o*10%e}return 0}function P(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function s(t,e){if(E(t,e),this instanceof s)t=P(n.d,n.n),this.s=n.s,this.n=n.n/t,this.d=n.d/t;else return a(n.s*n.n,n.d)}s.DivisionByZero=new Error("Division by Zero"),s.InvalidParameter=new Error("Invalid argument"),s.NonIntegerParameter=new Error("Parameters must be integer"),s.prototype={s:1,n:0,d:1,abs:function(){return a(this.n,this.d)},neg:function(){return a(-this.s*this.n,this.d)},add:function(t,e){return E(t,e),a(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(t,e){return E(t,e),a(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(t,e){return E(t,e),a(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(t,e){return E(t,e),a(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return a(this.s*this.n,this.d)},mod:function(t,e){if(isNaN(this.n)||isNaN(this.d))return new s(NaN);if(t===void 0)return a(this.s*this.n%this.d,1);if(E(t,e),n.n===0&&this.d===0)throw s.DivisionByZero;return a(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d)},gcd:function(t,e){return E(t,e),a(P(n.n,this.n)*P(n.d,this.d),n.d*this.d)},lcm:function(t,e){return E(t,e),n.n===0&&this.n===0?a(0,1):a(n.n*this.n,P(n.n,this.n)*P(n.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):a(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):a(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):a(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return a(this.s*this.d,this.n)},pow:function(t,e){if(E(t,e),n.d===1)return n.s<0?a(Math.pow(this.s*this.d,n.n),Math.pow(this.n,n.n)):a(Math.pow(this.s*this.n,n.n),Math.pow(this.d,n.n));if(this.s<0)return null;var i=I(this.n),r=I(this.d),o=1,w=1;for(var _ in i)if(_!=="1"){if(_==="0"){o=0;break}if(i[_]*=n.n,i[_]%n.d===0)i[_]/=n.d;else return null;o*=Math.pow(_,i[_])}for(var _ in r)if(_!=="1"){if(r[_]*=n.n,r[_]%n.d===0)r[_]/=n.d;else return null;w*=Math.pow(_,r[_])}return n.s<0?a(w,o):a(o,w)},equals:function(t,e){return E(t,e),this.s*this.n*n.d===n.s*n.n*this.d},compare:function(t,e){E(t,e);var i=this.s*this.n*n.d-n.s*n.n*this.d;return(0<i)-(i<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var e=this.abs(),i=e.toContinued(),r=1;r<i.length;r++){for(var o=a(i[r-1],1),w=r-2;w>=0;w--)o=o.inverse().add(i[w]);if(o.sub(e).abs().valueOf()<t)return o.mul(this.s)}return this},divisible:function(t,e){return E(t,e),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,i="",r=this.n,o=this.d;return this.s<0&&(i+="-"),o===1?i+=r:(t&&(e=Math.floor(r/o))>0&&(i+=e,i+=" ",r%=o),i+=r,i+="/",i+=o),i},toLatex:function(t){var e,i="",r=this.n,o=this.d;return this.s<0&&(i+="-"),o===1?i+=r:(t&&(e=Math.floor(r/o))>0&&(i+=e,r%=o),i+="\\frac{",i+=r,i+="}{",i+=o,i+="}"),i},toContinued:function(){var t,e=this.n,i=this.d,r=[];if(isNaN(e)||isNaN(i))return r;do r.push(Math.floor(e/i)),t=e%i,e=i,i=t;while(e!==1);return r},toString:function(t){var e=this.n,i=this.d;if(isNaN(e)||isNaN(i))return"NaN";t=t||15;var r=M(e,i),o=N(e,i,r),w=this.s<0?"-":"";if(w+=e/i|0,e%=i,e*=10,e&&(w+="."),r){for(var _=o;_--;)w+=e/i|0,e%=i,e*=10;w+="(";for(var _=r;_--;)w+=e/i|0,e%=i,e*=10;w+=")"}else for(var _=t;e&&_--;)w+=e/i|0,e%=i,e*=10;return w}},Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Fraction=s,p.exports=s})()})(Ct);const at=qt(Ct.exports),{document:it}=Ut;function Lt(p,d,m){const b=p.slice();return b[11]=d[m],b}function Ht(p){let d,m,b;return{c(){d=y("div"),m=k("ERROR: "),b=k(p[3])},l(n){d=g(n,"DIV",{});var c=O(d);m=C(c,"ERROR: "),b=C(c,p[3]),c.forEach(v)},m(n,c){R(n,d,c),h(d,m),h(d,b)},p(n,c){c&8&&kt(b,n[3])},d(n){n&&v(d)}}}function zt(p){let d,m,b,n,c,a,I,E,B=p[4],M=[];for(let N=0;N<B.length;N+=1)M[N]=Tt(Lt(p,B,N));return{c(){d=y("button"),m=k("Link to this result"),b=j(),n=y("div"),c=k(`Component list:
    `),a=y("ul");for(let N=0;N<M.length;N+=1)M[N].c()},l(N){d=g(N,"BUTTON",{});var P=O(d);m=C(P,"Link to this result"),P.forEach(v),b=U(N),n=g(N,"DIV",{});var s=O(n);c=C(s,`Component list:
    `),a=g(s,"UL",{});var t=O(a);for(let e=0;e<M.length;e+=1)M[e].l(t);t.forEach(v),s.forEach(v)},m(N,P){R(N,d,P),h(d,m),R(N,b,P),R(N,n,P),h(n,c),h(n,a);for(let s=0;s<M.length;s+=1)M[s].m(a,null);I||(E=lt(d,"click",p[5]),I=!0)},p(N,P){if(P&16){B=N[4];let s;for(s=0;s<B.length;s+=1){const t=Lt(N,B,s);M[s]?M[s].p(t,P):(M[s]=Tt(t),M[s].c(),M[s].m(a,null))}for(;s<M.length;s+=1)M[s].d(1);M.length=B.length}},d(N){N&&v(d),N&&v(b),N&&v(n),Zt(M,N),I=!1,E()}}}function Tt(p){let d,m=p[11]+"",b;return{c(){d=y("li"),b=k(m)},l(n){d=g(n,"LI",{});var c=O(d);b=C(c,m),c.forEach(v)},m(n,c){R(n,d,c),h(d,b)},p(n,c){c&16&&m!==(m=n[11]+"")&&kt(b,m)},d(n){n&&v(d)}}}function Jt(p){let d,m,b,n,c,a,I,E,B,M,N,P,s,t,e,i,r,o,w=`|| Assuming the beat divisor before this is {8}
{9999}1-3[12:3],3-5[77.5#8:1],{8}5-7[51.6666666666667#12:1]`,_,Z,D,L,l,u,V,T,F,J,G,nt,ft,ht,dt,ct,K,st,q,rt,vt,mt,pt,_t,X,ot,Q,Nt,bt;function wt(f,S){if(f[4].length>0)return zt;if(f[3].length>0)return Ht}let W=wt(p),A=W&&W(p);return{c(){d=y("meta"),m=y("meta"),b=y("meta"),n=y("meta"),c=j(),a=y("div"),I=k("All the calculations are assuming that the slides start at (nearly) the same time."),E=y("br"),B=k(`
    To do this without making the slide yellow, use pseudo-EACH (the backtick character `),M=y("code"),N=k("`"),P=k(`):
    `),s=y("pre"),t=y("code"),e=k("1-3[12:3]`3-5[77.5#8:1]`5-7[51.6666666666667#12:1]"),i=k(`
    or put an extremely small delay between them:
    `),r=y("pre"),o=y("code"),_=k(w),Z=j(),D=y("div"),L=y("strong"),l=k("Original slide duration:"),u=j(),V=y("br"),T=j(),F=y("input"),J=j(),G=y("div"),nt=y("strong"),ft=k("Slide BPM:"),ht=j(),dt=y("br"),ct=j(),K=y("input"),st=j(),q=y("div"),rt=y("strong"),vt=k("Number of components:"),mt=j(),pt=y("br"),_t=j(),X=y("input"),ot=j(),A&&A.c(),Q=Ot(),this.h()},l(f){const S=Vt("svelte-gjf344",it.head);d=g(S,"META",{property:!0,content:!0}),m=g(S,"META",{property:!0,content:!0}),b=g(S,"META",{property:!0,content:!0}),n=g(S,"META",{property:!0,content:!0}),S.forEach(v),c=U(f),a=g(f,"DIV",{});var z=O(a);I=C(z,"All the calculations are assuming that the slides start at (nearly) the same time."),E=g(z,"BR",{}),B=C(z,`
    To do this without making the slide yellow, use pseudo-EACH (the backtick character `),M=g(z,"CODE",{});var yt=O(M);N=C(yt,"`"),yt.forEach(v),P=C(z,`):
    `),s=g(z,"PRE",{});var gt=O(s);t=g(gt,"CODE",{});var Et=O(t);e=C(Et,"1-3[12:3]`3-5[77.5#8:1]`5-7[51.6666666666667#12:1]"),Et.forEach(v),gt.forEach(v),i=C(z,`
    or put an extremely small delay between them:
    `),r=g(z,"PRE",{});var Mt=O(r);o=g(Mt,"CODE",{});var St=O(o);_=C(St,w),St.forEach(v),Mt.forEach(v),z.forEach(v),Z=U(f),D=g(f,"DIV",{});var $=O(D);L=g($,"STRONG",{});var Pt=O(L);l=C(Pt,"Original slide duration:"),Pt.forEach(v),u=U($),V=g($,"BR",{}),T=U($),F=g($,"INPUT",{}),$.forEach(v),J=U(f),G=g(f,"DIV",{});var x=O(G);nt=g(x,"STRONG",{});var Dt=O(nt);ft=C(Dt,"Slide BPM:"),Dt.forEach(v),ht=U(x),dt=g(x,"BR",{}),ct=U(x),K=g(x,"INPUT",{type:!0}),x.forEach(v),st=U(f),q=g(f,"DIV",{});var tt=O(q);rt=g(tt,"STRONG",{});var It=O(rt);vt=C(It,"Number of components:"),It.forEach(v),mt=U(tt),pt=g(tt,"BR",{}),_t=U(tt),X=g(tt,"INPUT",{type:!0}),tt.forEach(v),ot=U(f),A&&A.l(f),Q=Ot(),this.h()},h(){it.title="FESTiVAL Slide Calculator",H(d,"property","og:title"),H(d,"content","FESTiVAL Slide Calculator"),H(m,"property","og:description"),H(m,"content","Split a FESTiVAL CHAIN SLIDE into smaller slides of the same duration. The slide delay is also set, so that the next slide immediately starts when the previous one ends."),H(b,"property","og:url"),H(b,"content","https://beerpiss.github.io/festival-slide-calculation/"),H(n,"property","og:image"),H(n,"content","https://beerpiss.github.io/festival-slide-calculation/favicon.png"),H(K,"type","number"),H(X,"type","number")},m(f,S){h(it.head,d),h(it.head,m),h(it.head,b),h(it.head,n),R(f,c,S),R(f,a,S),h(a,I),h(a,E),h(a,B),h(a,M),h(M,N),h(a,P),h(a,s),h(s,t),h(t,e),h(a,i),h(a,r),h(r,o),h(o,_),R(f,Z,S),R(f,D,S),h(D,L),h(L,l),h(D,u),h(D,V),h(D,T),h(D,F),et(F,p[0]),R(f,J,S),R(f,G,S),h(G,nt),h(nt,ft),h(G,ht),h(G,dt),h(G,ct),h(G,K),et(K,p[1]),R(f,st,S),R(f,q,S),h(q,rt),h(rt,vt),h(q,mt),h(q,pt),h(q,_t),h(q,X),et(X,p[2]),R(f,ot,S),A&&A.m(f,S),R(f,Q,S),Nt||(bt=[lt(F,"input",p[6]),lt(K,"input",p[7]),lt(X,"input",p[8])],Nt=!0)},p(f,[S]){S&1&&F.value!==f[0]&&et(F,f[0]),S&2&&ut(K.value)!==f[1]&&et(K,f[1]),S&4&&ut(X.value)!==f[2]&&et(X,f[2]),W===(W=wt(f))&&A?A.p(f,S):(A&&A.d(1),A=W&&W(f),A&&(A.c(),A.m(Q.parentNode,Q)))},i:At,o:At,d(f){v(d),v(m),v(b),v(n),f&&v(c),f&&v(a),f&&v(Z),f&&v(D),f&&v(J),f&&v(G),f&&v(st),f&&v(q),f&&v(ot),A&&A.d(f),f&&v(Q),Nt=!1,jt(bt)}}}function Kt(p){if(p.includes("#"))return null;const[d,m]=p.replaceAll("[","").replaceAll("]","").split(":");return Number.isNaN(parseFloat(d))||Number.isNaN(parseFloat(m))?null:[parseFloat(m),parseFloat(d)]}function Xt(p,d,m){let b,n;const c=new URLSearchParams(document.location.search);let a=c.get("sd")??"[4:3]",I=Number(c.get("sb")??"155"),E=Number(c.get("c")??"3");function B(){Gt("?"+new URLSearchParams({sd:a,sb:I.toString(),c:E.toString()}),{replaceState:!0})}function M(t,e,i){if(e<=0||i<=0)return[[],"Slide BPM or component count cannot be smaller than 0"];let r=Kt(t);if(!r)return[[],"Slide duration is not valid"];let[o,w]=r;const _=w*i,Z=[`[${_}:${o}]`];for(let D=1;D<i;D++){const L=new at(o).div(_).mul(D).add(.25),l=new at(e).mul(.25).div(L),u=new at(_).div(o).mul(L).mul(4),V=new at(1).div(u),[T,F]=V.toFraction().split("/");Z.push(`[${+l.valueOf().toFixed(13)}#${F}:${T}]`)}return[Z,""]}function N(){a=this.value,m(0,a)}function P(){I=ut(this.value),m(1,I)}function s(){E=ut(this.value),m(2,E)}return p.$$.update=()=>{p.$$.dirty&7&&m(4,[b,n]=M(a,I,E),b,(m(3,n),m(0,a),m(1,I),m(2,E)))},[a,I,E,n,b,B,N,P,s]}class Wt extends Rt{constructor(d){super(),Bt(this,d,Xt,Jt,Ft,{})}}export{Wt as default};
